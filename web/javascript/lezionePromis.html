<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>

        console.log("1")

        // passaggio di funzione come parametro
        let stampa = () => {
            console.log("2")
            console.log( "sono stampa");
        }

        let test = (t) => {
            t();
        }
        
        console.log("3")

        test(stampa);

        // Promise : oggetto che ha due esiti : resolve (ok) pure regect (no)
        // perchÃ¨ esiste la promise? asincrona
        let x = new Promise( (res,rej) => {
            // deve esserci una chiamata asincrona
            console.log("4")
            setTimeout( () => {
                console.log("5")
                res("Tutto ok utenti recuperati");// chiamata fallita
            }, 2000)// 2 secondi
        });
        
        console.log("6.....codice corposo.....1000 righe 1 secondo....");
        
        // codice consumatore : stampare 
        // 1 - 3 - 2 - 4 - 6 - 5
        
        x.then( (risultato) => {// nel then estra solo alla fine (eseguita alla fine)
            console.log("7")
            console.log(risultato); // tutto ok utenti recuperati
        } ).catch( (errore) => {
            console.log(errore);
        });

        console.log("8")
        // 1- 3 - 2 - 4 - 6 - 8 - 5 - 7
    </script>
</head>
<body>
    <h1>Promise() : oggetto Javascript ... gestisce le chiamate asincrone</h1>
</body>
</html>